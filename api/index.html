<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>HTTP APIæ–‡æ¡£ - æˆ‘çš„å…¨æ–° Hugo ç½‘ç«™</title><meta name="Description" content="è¿™æ˜¯æˆ‘çš„å…¨æ–° Hugo ç½‘ç«™"><meta property="og:title" content="HTTP APIæ–‡æ¡£" />
<meta property="og:description" content="HTTP APIæ–‡æ¡£ å®‰è£…é•œåƒ ä½¿ç”¨etcherçƒ§å½•é•œåƒ SDå¡æ ¼å¼åŒ–å·¥å…· https://www.sdcard.org/downloads/formatter/ å¼€å¯ssh ä½¿ç”¨IP scanè·å–ip åœ¨/bootä¸‹æ–°å»ºåä¸ºsshçš„ç©ºæ–‡ä»¶å¤¹ 1 2 é»˜" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/api/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-19T12:05:23+08:00" />
<meta property="article:modified_time" content="2021-11-19T12:05:23+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="HTTP APIæ–‡æ¡£"/>
<meta name="twitter:description" content="HTTP APIæ–‡æ¡£ å®‰è£…é•œåƒ ä½¿ç”¨etcherçƒ§å½•é•œåƒ SDå¡æ ¼å¼åŒ–å·¥å…· https://www.sdcard.org/downloads/formatter/ å¼€å¯ssh ä½¿ç”¨IP scanè·å–ip åœ¨/bootä¸‹æ–°å»ºåä¸ºsshçš„ç©ºæ–‡ä»¶å¤¹ 1 2 é»˜"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/api/" /><link rel="next" href="http://example.org/first_post/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "HTTP APIæ–‡æ¡£",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/api\/"
        },"genre": "posts","wordcount":  5074 ,
        "url": "http:\/\/example.org\/api\/","datePublished": "2021-11-19T12:05:23+08:00","dateModified": "2021-11-19T12:05:23+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Allen"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="æˆ‘çš„å…¨æ–° Hugo ç½‘ç«™"><span class="header-title-pre">ğŸ˜˜</span>å…¨æ–° Hugo ç½‘ç«™<span class="header-title-post">ğŸ˜ˆ</span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="æˆ‘çš„å…¨æ–° Hugo ç½‘ç«™"><span class="header-title-pre">ğŸ˜˜</span>å…¨æ–° Hugo ç½‘ç«™<span class="header-title-post">ğŸ˜ˆ</span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">HTTP APIæ–‡æ¡£</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Allen</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-11-19">2021-11-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 5074 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 11 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#å®‰è£…é•œåƒ">å®‰è£…é•œåƒ</a></li>
        <li><a href="#å¼€å¯ssh">å¼€å¯ssh</a></li>
        <li><a href="#é…ç½®minidlna">é…ç½®miniDLNA</a></li>
        <li><a href="#æ—è·¯ç”±è®¿é—®å›½å†…ç½‘ç«™å¾ˆæ…¢">æ—è·¯ç”±è®¿é—®å›½å†…ç½‘ç«™å¾ˆæ…¢</a></li>
        <li><a href="#wifié…ç½®">WiFié…ç½®</a></li>
        <li><a href="#hdmiè¿æ¥æ— ä¿¡å·">HDMIè¿æ¥æ— ä¿¡å·</a></li>
      </ul>
    </li>
    <li><a href="#4b-openwrt">4B OpenWRT</a>
      <ul>
        <li><a href="#opkgç›¸å…³">opkgç›¸å…³</a>
          <ul>
            <li><a href="#imgæ–‡ä»¶é€‰æ‹©å’ŒåŒºåˆ«">imgæ–‡ä»¶é€‰æ‹©å’ŒåŒºåˆ«</a></li>
          </ul>
        </li>
        <li><a href="#4b-è‡ªç¼–è¯‘openwrté•œåƒ">4B è‡ªç¼–è¯‘openwrté•œåƒ</a></li>
        <li><a href="#æ ‘è“æ´¾å®‰è£…centos7">æ ‘è“æ´¾å®‰è£…centos7</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="http-apiæ–‡æ¡£">HTTP APIæ–‡æ¡£</h1>
<h3 id="å®‰è£…é•œåƒ">å®‰è£…é•œåƒ</h3>
<p>ä½¿ç”¨etcherçƒ§å½•é•œåƒ</p>
<p><strong>SDå¡æ ¼å¼åŒ–å·¥å…·</strong></p>
<p><a href="https://www.sdcard.org/downloads/formatter/" target="_blank" rel="noopener noreffer">https://www.sdcard.org/downloads/formatter/</a></p>
<h3 id="å¼€å¯ssh">å¼€å¯ssh</h3>
<p>ä½¿ç”¨IP scanè·å–ip</p>
<p>åœ¨/bootä¸‹æ–°å»ºåä¸ºsshçš„ç©ºæ–‡ä»¶å¤¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">é»˜è®¤è´¦æˆ·pi
å¯†ç raspberry
</code></pre></td></tr></table>
</div>
</div><p><strong>è§£é”root</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo passwd root
sudo passwd --unlock root
</code></pre></td></tr></table>
</div>
</div><p>sudo vim /etc/ssh/sshd_config</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">PermitRootLogin yes
</code></pre></td></tr></table>
</div>
</div><p><strong>å®‰è£…omv5</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">export http_proxy=&#34;http://192.168.1.6:10101&#34;
export https_proxy=&#34;https://192.168.1.6:10101&#34;

wget -O - https://github.com/OpenMediaVault-Plugin-Developers/installScript/raw/master/install | sudo bash

# omv-extras releases(as root)
wget -O - https://github.com/OpenMediaVault-Plugin-Developers/packages/raw/master/install | bash


</code></pre></td></tr></table>
</div>
</div><p><strong>æ— æ˜¾ç¤ºå™¨å’Œè·¯ç”±å™¨è¿æ¥æ ‘è“æ´¾</strong></p>
<p>æŠŠWiFiå…±äº«ç»™ä»¥å¤ªç½‘,é»˜è®¤åˆ†é…çš„ipæ®µæ˜¯192.168.137.1</p>
<p>åœ¨cmdlineæ–‡ä»¶å¤´ä¸­åŠ å…¥,è®¾ç½®é™æ€ipåœ°å€</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ip=192.168.137.11
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ping raspberrypi.local

arp -a

# ç½‘çº¿ç›´è¿ç”µè„‘å’Œæ ‘è“æ´¾
ssh root@raspberrypi
ssh root@fe80::1d07:6bcc:506d:75d5%3

</code></pre></td></tr></table>
</div>
</div><p><strong>æ ‘è“æ´¾æ¢æº</strong></p>
<p>å¤‡ä»½</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># è½¯ä»¶æ›´æ–°æº
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
# ç³»ç»Ÿæ›´æ–°æº
sudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak

sudo nano /etc/apt/sources.list
sudo nano /etc/apt/sources.list.d/raspi.list

:%s/raspbian.raspberrypi.org/mirrors.ustc.edu.cn\/raspbian/g

:%s/archive.raspberrypi.org/mirrors.ustc.edu.cn\/archive.raspberrypi.org/g

# ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦(æ¨èä½¿ç”¨)
http://mirrors.ustc.edu.cn/raspbian/raspbian/
http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/

# é˜¿é‡Œäº‘(DebianæŠ¥æ— æ³•éªŒè¯å…¬é’¥é—®é¢˜)
http://mirrors.aliyun.com/raspbian/raspbian/
http://mirrors.aliyun.com/debian/

# æ¸…åå¤§å­¦
http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/
</code></pre></td></tr></table>
</div>
</div><p><strong>æ ‘è“æ´¾è®¾ç½®é™æ€IPåœ°å€</strong></p>
<p>sudo nano /etc/dhcpcd.conf
sudo systemctl restart dhcpcd.service</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">interface eth0

static ip_address=192.168.1.11/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.1

interface wlan0

static ip_address=192.168.1.22/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.1
</code></pre></td></tr></table>
</div>
</div><p>sudo nano /etc/network/interfaces
sudo systemctl restart networking.service</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">auto lo

iface lo inet loopback
iface eth0 inet dhcp

allow-hotplug wlan0
iface wlan0 inet manual
address 192.168.1.22
netmask 255.255.255.0
gateway 192.168.1.1
wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="é…ç½®minidlna">é…ç½®miniDLNA</h3>
<p>å®‰è£…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo apt-get install minidlna
</code></pre></td></tr></table>
</div>
</div><p>ç¼–è¾‘/etc/minidlna.conf</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">#Aè¡¨ç¤ºè¿™ä¸ªç›®å½•æ˜¯å­˜æ”¾éŸ³ä¹çš„ï¼Œå½“minidlnaè¯»åˆ°é…ç½®æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ è½½è¿™ä¸ªç›®å½•ä¸‹çš„éŸ³ä¹æ–‡ä»¶
media_dir=A,/media/pi/SAMSUNG/Music
media_dir=P,/media/pi/SAMSUNG/Picture
media_dir=V,/media/pi/SAMSUNG/video
#é…ç½®minidlnaçš„æ•°åº“æ•°æ®çš„å­˜æ”¾ç›®å½•
db_dir=/var/lib/DLNA/db
#é…ç½®æ—¥å¿—ç›®å½•
log_dir=/var/log/DLNA
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># é‡å¯ minidlna
/etc/init.d/minidlna restart
/etc/init.d/minidlna status
# å¼€æœºè‡ªå¯minidlna
sudo update-rc.d minidlna defaults
# å¯åŠ¨ minidlna æœåŠ¡
sudo service minidlna start
# ä¿®æ”¹é…ç½®æ–‡ä»¶åŠåª’ä½“èµ„æºæ›´æ–°æ—¶ï¼Œéœ€è¦å¼ºåˆ¶åˆ·æ–°
sudo service minidlna force-reload
# å–æ¶ˆ minidlna çš„å¼€æœºè‡ªåŠ¨å¯åŠ¨
sudo update-rc.d -f minidlna remove
# åœæ­¢ minidlna æ‰€æœ‰è¿›ç¨‹
sudo killall minidlna
# å¸è½½ minidlna
sudo apt-get remove --purge minidlna
</code></pre></td></tr></table>
</div>
</div><p><strong>æŠ¥é”™</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># 1
minidlna.c:631: error: Media directory &#34;P,/media/pi/SAMSUNG/Picture&#34; not accessible [Permission denied]
# 2
minidlna.c:631: error: Media directory &#34;V,/media/pi/SAMSUNG/video&#34; not accessible [No such file or directory]
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># edited /etc/default/minidlna
USER=root
GROUP=root

# then /etc/minidlna.conf
user=root

chown &lt;user&gt;:&lt;group&gt; /var/cache/minidlna
chown &lt;user&gt;:&lt;group&gt; /run/minidlna

</code></pre></td></tr></table>
</div>
</div><p><strong>æ ‘è“æ´¾è¿æ¥VNC</strong></p>
<p>é»˜è®¤æ²¡æœ‰å¼€é€š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># é€‰ 5 network-&gt;enable vnc
sudo raspi-config
</code></pre></td></tr></table>
</div>
</div><p>vnc viewer è¿æ¥æŠ¥é”™<strong>cannot currently show the desktop</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># é€‰ 7 adv-&gt;A5 è®¾ç½®åˆ†è¾¨ç‡
sudo raspi-config
</code></pre></td></tr></table>
</div>
</div><p><strong>æ ‘è“æ´¾é»˜è®¤çš„VNCæ˜¯åŸºäºç”¨æˆ·åå¯†ç éªŒè¯,éœ€è¦ä½¿ç”¨vncviewerè¿æ¥</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">é»˜è®¤è´¦æˆ·pi
å¯†ç raspberry
</code></pre></td></tr></table>
</div>
</div><p><strong>ä½¿ç”¨mobaxtermçš„vncè¿æ¥æç¤º<code>No configured security type is supported by 3.3 VNC Viewer</code></strong></p>
<p>å¼€å¯èº«ä»½è®¤è¯çš„VNCè¿æ¥</p>
<p><strong>å›¾å½¢åŒ–è®¾ç½®</strong></p>
<ol>
<li>å•å‡»é¡¶éƒ¨æ ä¸­çš„Vncå›¾æ ‡ï¼Œæ‰“å¼€æ±‰å ¡åŒ…èœå•ï¼Œç„¶åé€‰æ‹©â€œé€‰é¡¹&hellip;â€
åœ¨â€œå®‰å…¨æ€§â€é€‰é¡¹å¡ä¸‹ï¼Œä¸ºâ€œèº«ä»½éªŒè¯â€é€‰æ‹©â€œ VNCå¯†ç â€é€‰é¡¹
åœ¨â€œç”¨æˆ·å’Œæƒé™â€é€‰é¡¹å¡ä¸‹ï¼Œé€‰æ‹©â€œæ ‡å‡†ç”¨æˆ·â€ï¼Œç„¶åå•å‡»â€œå¯†ç &hellip;â€ä»¥è®¾ç½®æ‚¨çš„VNCå¯†ç 
é‡æ–°å¯åŠ¨RPiï¼Œæ‚¨ç°åœ¨åº”è¯¥å¯ä»¥ä½¿ç”¨é¦–é€‰çš„VNCå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥äº†ï¼</li>
</ol>
<p><strong>sshé…ç½®</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo echo &#39;Authentication=VncAuth&#39; &gt;&gt; /root/.vnc/config.d/vncserver-x11

# è®¾ç½®vncè¿æ¥çš„å¯†ç 
sudo vncpasswd -service

sudo reboot
</code></pre></td></tr></table>
</div>
</div><h3 id="æ—è·¯ç”±è®¿é—®å›½å†…ç½‘ç«™å¾ˆæ…¢">æ—è·¯ç”±è®¿é—®å›½å†…ç½‘ç«™å¾ˆæ…¢</h3>
<p>å›½å¤–ç½‘ç«™è®¿é—®å¾ˆå¿«,ä»€ä¹ˆè®¾ç½®DNS,åˆ†å¼€è®¾ç½®DNSéƒ½ä¸è¡Œ,çœ‹rightè®ºå›è¯´,è®¾ç½®é˜²ç«å¢™è§„åˆ™</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># æµ‹è¯•å¯ç”¨
iptables -t nat -I POSTROUTING -j MASQUERADE

# æœªæµ‹è¯•
iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE
</code></pre></td></tr></table>
</div>
</div><p><strong>ä¸€é”®è®¾ç½®ç½‘å…³,IP,DNS</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">@echo off
echo æ­£åœ¨ä¿®æ”¹IPåœ°å€å’ŒDNSæœåŠ¡å™¨åœ°å€,è¯·è€å¿ƒç­‰å¾…â€¦â€¦â€¦â€¦
echo æ­£åœ¨æ›´æ”¹æœ¬æœºIPåœ°å€...
netsh interface ipv4 set address name=&#34;WLAN&#34; source=static addr=192.168.1.100 mask=255.255.255.0 gateway=192.168.1.2 gwmetric=0 &gt;nul
echo æ­£åœ¨æ·»åŠ æœ¬æœºé¦–é€‰DNSæœåŠ¡å™¨...
netsh interface ipv4 set dns name=&#34;WLAN&#34; source=static addr=192.168.1.2 register=PRIMARY
echo æ­£åœ¨æ·»åŠ å¤‡ç”¨DNSæœåŠ¡å™¨...
netsh interface ipv4 add dns name=&#34;WLAN&#34; addr=223.5.5.5
echo æ£€æŸ¥å½“å‰æœ¬æœºé…ç½®...
ipconfig /all
pause
</code></pre></td></tr></table>
</div>
</div><p>dhcpæ–¹å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">@echo off
echo æ­£åœ¨ä¿®æ”¹IPåœ°å€å’ŒDNSæœåŠ¡å™¨åœ°å€,è¯·è€å¿ƒç­‰å¾…â€¦â€¦â€¦â€¦
echo æ­£åœ¨æ›´æ”¹æœ¬æœºIPåœ°å€...
netsh interface ipv4 set address name=&#34;WLAN&#34; source=dhcp
echo æ­£åœ¨æ·»åŠ æœ¬æœºé¦–é€‰DNSæœåŠ¡å™¨...
netsh interface ipv4 set dns name=&#34;WLAN&#34; source=dhcp
echo æ£€æŸ¥å½“å‰æœ¬æœºé…ç½®...
ipconfig /all
pause
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">1.nameï¼šç½‘ç»œè¿æ¥åç§°ï¼›
2.sourceï¼šè·å–ipçš„é€”å¾„ï¼ŒåŠ¨æ€è·å–ä¸ºdhcpï¼Œæ‰‹åŠ¨è®¾ç½®ä¸ºstaticï¼›
3.addrï¼šè·å–çš„ipåœ°å€ï¼›
4.maskï¼šå­ç½‘æ©ç ï¼›
5.gatewayï¼šç½‘å…³ï¼›
6.gwmetricï¼šç½‘å…³è·ƒç‚¹æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ•´å‹æ•°å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºâ€œè‡ªåŠ¨â€:autoï¼›
7.registerï¼š
   primary: åªåœ¨ä¸» DNS åç¼€ä¸‹æ³¨å†Œï¼›
      none: ç¦ç”¨åŠ¨æ€ DNS æ³¨å†Œï¼›
      both: åœ¨ä¸» DNS åç¼€ä¸‹æ³¨å†Œï¼Œä¹Ÿåœ¨ç‰¹å®šè¿æ¥åç¼€ä¸‹æ³¨å†Œï¼›
</code></pre></td></tr></table>
</div>
</div><h3 id="wifié…ç½®">WiFié…ç½®</h3>
<p><a href="https://jingyan.baidu.com/article/91f5db1b9daa3e5c7f05e3e8.html" target="_blank" rel="noopener noreffer">https://jingyan.baidu.com/article/91f5db1b9daa3e5c7f05e3e8.html</a></p>
<p>ç”¨æˆ·å¯ä»¥åœ¨æœªå¯åŠ¨æ ‘è“æ´¾çš„çŠ¶æ€ä¸‹å•ç‹¬ä¿®æ”¹ /boot/wpa_supplicant.conf æ–‡ä»¶é…ç½® WiFi çš„ SSID å’Œå¯†ç ï¼Œè¿™æ ·æ ‘è“æ´¾å¯åŠ¨åä¼šè‡ªè¡Œè¯»å– wpa_supplicant.conf é…ç½®æ–‡ä»¶è¿æ¥ WiFi è®¾å¤‡ã€‚</p>
<p>æ“ä½œæ–¹æ³•ç®€å•ï¼šå°†åˆ·å¥½ Raspbian ç³»ç»Ÿçš„ SD å¡ç”¨ç”µè„‘è¯»å–ã€‚åœ¨ boot åˆ†åŒºï¼Œä¹Ÿå°±æ˜¯æ ‘è“æ´¾çš„ /boot ç›®å½•ä¸‹æ–°å»º wpa_supplicant.conf æ–‡ä»¶ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å‚è€ƒæ ¼å¼å¡«å…¥å†…å®¹å¹¶ä¿å­˜ wpa_supplicant.conf æ–‡ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
 
network={
ssid=&#34;902&#34;
psk=&#34;12345678900_902&#34;
key_mgmt=WPA-PSK
priority=1
}
 
network={
ssid=&#34;z&#34;
psk=&#34;1234567899&#34;
key_mgmt=WPA-PSK
priority=2
scan_ssid=1
}
</code></pre></td></tr></table>
</div>
</div><p>æœŸé—´å‘ç°è¿ä¸ä¸Šæˆ‘åˆ·çš„åç¡•å›ºä»¶çš„éšè—WiFi</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># æŠŠè¿™è¡Œå»æ‰,å¯ä»¥è¿æ¥,ä½†æ˜¯æç¤ºno set country
country=CN

# å¯ä»¥è¿æ¥,å¯ä»¥æ˜¾ç¤ºå…¶ä»–WiFiåˆ—è¡¨
country=US
</code></pre></td></tr></table>
</div>
</div><p>vim /etc/wpa_supplicant/wpa_supplicant.conf</p>
<p>è¿è¡Œå‘½ä»¤wpa_cli -i wlan0 reconfigure</p>
<p>ä½¿ç”¨ifconfig wlan0ç¡®è®¤è¿æ¥ã€‚</p>
<p>è¯´æ˜ä»¥åŠä¸åŒå®‰å…¨æ€§çš„ WiFi é…ç½®ç¤ºä¾‹ï¼š
#ssid:ç½‘ç»œçš„ssid
#psk:å¯†ç 
#priority:è¿æ¥ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆä¸å¯ä»¥æ˜¯è´Ÿæ•°ï¼‰
#scan_ssid:è¿æ¥éšè—WiFiæ—¶éœ€è¦æŒ‡å®šè¯¥å€¼ä¸º1</p>
<p>å¦‚æœä½ çš„ WiFi æ²¡æœ‰å¯†ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">network={
ssid=&#34;ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰&#34;
key_mgmt=NONE
}
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ çš„ WiFi ä½¿ç”¨WEPåŠ å¯†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">network={
ssid=&#34;ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰&#34;
key_mgmt=NONE
wep_key0=&#34;ä½ çš„wifiå¯†ç &#34;
}
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ çš„ WiFi ä½¿ç”¨WPA/WPA2åŠ å¯†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">network={
ssid=&#34;ä½ çš„æ— çº¿ç½‘ç»œåç§°ï¼ˆssidï¼‰&#34;
key_mgmt=WPA-PSK
psk=&#34;ä½ çš„wifiå¯†ç &#34;
}
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ ä¸æ¸…æ¥š WiFi çš„åŠ å¯†æ¨¡å¼ï¼Œå¯ä»¥åœ¨å®‰å“æ‰‹æœºä¸Šç”¨ root explorer æ‰“å¼€ /data/misc/wifi/wpa/wpa_supplicant.confï¼ŒæŸ¥çœ‹ WiFi çš„ä¿¡æ¯ã€‚</p>
<h3 id="hdmiè¿æ¥æ— ä¿¡å·">HDMIè¿æ¥æ— ä¿¡å·</h3>
<p>åœ¨Windowsä¸‹ï¼Œè¿›å…¥å·²å†™å…¥æ ‘è“æ´¾ç³»ç»Ÿçš„SDå¡ï¼Œæ‰¾åˆ°config.txtï¼ˆæœ€å¥½å¤‡ä»½ä¸€ä¸‹è¿™ä¸ªï¼‰ã€‚å»ºè®®ï¼Œä¸ç®¡ä½ æ˜¯ä»€ä¹ˆæ˜¾ç¤ºå™¨ï¼Œæˆ–è€…é«˜æ¸…ç”µè§†æœºï¼Œæœ€å¥½åœ¨æ²¡æ˜¾ç¤ºçš„æƒ…å†µï¼Œè¯·å°†config.txt ä¸­çš„åˆ†è¾¨ç‡è°ƒä½ä¸€äº›ï¼Œä¸è¦è€æƒ³ç€ï¼Œæˆ‘çš„æ˜¾ç¤ºè®¾å¤‡æ”¯æŒ1080pï¼Œå°±éå¾—ä¸€æ­¥åˆ°ä½ã€‚ã€‚ã€‚å»ºè®®ä»ä¸‹é¢çš„ä½åˆ†è¾¨ç‡å°è¯•å¼€å§‹ï¼š
è®¡ç®—æœºæ˜¾ç¤ºå™¨ä½¿ç”¨çš„åˆ†è¾¨ç‡ ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">hdmi_mode=4    640x480   60Hz 
hdmi_mode=9    800x600   60Hz 
hdmi_mode=16   1024x768  60Hz
</code></pre></td></tr></table>
</div>
</div><p>CEAè§„å®šçš„ç”µè§†è§„æ ¼åˆ†è¾¨ç‡ã€‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">hdmi_mode=2    480p  60Hz 
hdmi_mode=4    720p  60Hz
</code></pre></td></tr></table>
</div>
</div><p>å¦å¤–ï¼šè‹¥ç›´æ¥ä½¿ç”¨çš„æ˜¯HDMIçº¿æ¥æ˜¾ç¤ºè®¾å¤‡ï¼Œè¯·åœ¨config.txtä¸­æ·»åŠ ä¸€æ¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">hdmi_ignore_edid=0xa5000080
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªæ˜¯å‘½ä»¤æ ‘è“æ´¾ä¸æ£€æµ‹HDMIè®¾å¤‡çš„ä»»ä½•ä¿¡æ¯ï¼ŒåªæŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„åˆ†è¾¨ç‡è¾“å‡ºã€‚ è¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨æ£€æµ‹æ˜¾ç¤ºè®¾å¤‡çš„åˆ†è¾¨ç‡ï¼Œè€Œé¿å…æ‰å¾ˆå¤šå¯èƒ½ä¸æ˜¾ç¤ºçš„é€ æˆå› ç´ ï¼Œå°±ä¼šæŒ‰ç…§ä½ è‡ªå·±è®¾ç½®çš„åˆ†è¾¨ç‡æ˜¾ç¤ºã€‚åˆ†è¾¨ç‡ä¹ŸæŒ‰ç…§ä¸Šé¢åˆ—å‡ºçš„å°è¯•ï¼Œä¿®æ”¹config.txt ä¸­hdmi_mode=x çš„â€xâ€œå€¼ã€‚</p>
<h2 id="4b-openwrt">4B OpenWRT</h2>
<p><strong>ä½¿ç”¨æ— çº¿æ¨¡å¼ä¸­ç»§çš„è½¯è·¯ç”±è®¾ç½®</strong></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212616793.png"
        data-srcset="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212616793.png, https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212616793.png 1.5x, https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212616793.png 2x"
        data-sizes="auto"
        alt="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212616793.png"
        title="image-20210814212616793" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212720464.png"
        data-srcset="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212720464.png, https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212720464.png 1.5x, https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212720464.png 2x"
        data-sizes="auto"
        alt="https://gitee.com/gentisz/imgs/raw/master/imgs/image-20210814212720464.png"
        title="image-20210814212720464" /></p>
<h3 id="opkgç›¸å…³">opkgç›¸å…³</h3>
<p><strong>OpenWrté•œåƒæº</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># å®˜æ–¹æº
src/gz openwrt_core https://downloads.openwrt.org/releases/21.02.0-rc4/targets/bcm27xx/bcm2711/packages
src/gz openwrt_base https://downloads.openwrt.org/releases/21.02.0-rc4/packages/aarch64_cortex-a72/base
src/gz openwrt_luci https://downloads.openwrt.org/releases/21.02.0-rc4/packages/aarch64_cortex-a72/luci
src/gz openwrt_packages https://downloads.openwrt.org/releases/21.02.0-rc4/packages/aarch64_cortex-a72/packages
src/gz openwrt_routing https://downloads.openwrt.org/releases/21.02.0-rc4/packages/aarch64_cortex-a72/routing
src/gz openwrt_telephony https://downloads.openwrt.org/releases/21.02.0-rc4/packages/aarch64_cortex-a72/telephony

# ä¸­ç§‘å¤§
src/gz openwrt_core https://openwrt.proxy.ustclug.org/snapshots/targets/bcm27xx/bcm2711/packages
src/gz openwrt_base https://openwrt.proxy.ustclug.org/snapshots/packages/aarch64_cortex-a72/base
src/gz openwrt_luci https://openwrt.proxy.ustclug.org/snapshots/packages/aarch64_cortex-a72/luci
src/gz openwrt_packages https://openwrt.proxy.ustclug.org/snapshots/packages/aarch64_cortex-a72/packages
src/gz openwrt_routing https://openwrt.proxy.ustclug.org/snapshots/packages/aarch64_cortex-a72/routing

# æ¸…åæº
src/gz openwrt_core https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/targets/bcm27xx/bcm2711/packages
src/gz openwrt_base https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/packages/aarch64_cortex-a72/base
src/gz openwrt_luci https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/packages/aarch64_cortex-a72/luci
src/gz openwrt_packages https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/packages/aarch64_cortex-a72/packages
src/gz openwrt_routing https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/packages/aarch64_cortex-a72/routing
src/gz openwrt_telephony https://mirrors.tuna.tsinghua.edu.cn/releases/21.02.0-rc4/packages/aarch64_cortex-a72/telephony
</code></pre></td></tr></table>
</div>
</div><p>å¸¸ç”¨å‘½ä»¤</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># æŸ¥çœ‹è·¯ç”±å™¨çš„æ¶æ„
opkg print-architecture | awk &#39;{print $2}&#39;

opkg update
opkg install luci-i18n-base-zh-cn


</code></pre></td></tr></table>
</div>
</div><p>shadowsocksæº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># æ·»åŠ opkg key
wget http://openwrt-dist.sourceforge.net/openwrt-dist.pub
opkg-key add openwrt-dist.pub
opkg install wget ca-certificates ca-bundle

# vi /etc/opkg/customfeeds.conf
src/gz openwrt_dist http://openwrt-dist.sourceforge.net/packages/base/aarch64_cortex-a72
src/gz openwrt_dist_luci http://openwrt-dist.sourceforge.net/packages/luci
# å®‰è£…SHADOWSOCKSåŠChinaDNS
opkg update
opkg install ChinaDNS iptables-mod-tproxy
opkg install luci-app-chinadns
opkg install shadowsocks-libev
opkg install luci-app-shadowsocks
# ç”Ÿæˆä¸­å›½IPåˆ—è¡¨
wget -O /tmp/delegated-apnic-latest &#39;http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest&#39; &amp;&amp; awk -F\| &#39;/CN\|ipv4/ { printf(&#34;%s/%d\n&#34;, $4, 32-log($5)/log(2)) }&#39; /tmp/delegated-apnic-latest &gt; /etc/chinadns_chnroute.txt
# æ¯å‘¨æ›´æ–°ä¸­å›½IPåˆ—è¡¨
crontab -e
0 3 * * 1    wget http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest -O /tmp/delegated-apnic-latest &amp;&amp; awk -F\| &#39;/CN\|ipv4/ { printf(&#34;%s/%d\n&#34;, $4, 32-log($5)/log(2)) }&#39; /tmp/delegated-apnic-latest &gt; /etc/chinadns_chnroute.txt
# è‡ªå¯åŠ¨
/etc/init.d/cron start
/etc/init.d/cron enable
</code></pre></td></tr></table>
</div>
</div><p><strong>module &lsquo;luci.cbi&rsquo; not found:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># åˆ LuCIç¼“å­˜
rm -rf /tmp/luci-*
opkg update
opkg install luci luci-base luci-compat
</code></pre></td></tr></table>
</div>
</div><h4 id="imgæ–‡ä»¶é€‰æ‹©å’ŒåŒºåˆ«">imgæ–‡ä»¶é€‰æ‹©å’ŒåŒºåˆ«</h4>
<p>åŸºæœ¬ä¸ŠOpenWRTé’ˆå¯¹æ¯ä¸ªå‹å·çš„äº§å“éƒ½æœ‰4ä¸ªæ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rpi-3-ext4-factory.img.gz
rpi-3-ext4-sysupgrade.img.gz
rpi-3-squashfs-factory.img.gz
rpi-3-squashfs-sysupgrade.img.gz
</code></pre></td></tr></table>
</div>
</div><ol>
<li>
<p>å¸¦ext4çš„æ˜¯å¯ä»¥åˆ©ç”¨Linuxå‘½ä»¤æŠŠä½ çš„tfå¡ç©ºä½™ç©ºåŠ æ‹¿å›æ¥åšå…¶ä»–ç”¨é€”ï¼Œæ¯•ç«Ÿimgæ‰å‡ åMå¤§å°è€Œå·²ï¼Œä¸€èˆ¬ç°åœ¨çš„tfå¡éƒ½è¦16Gèµ·äº†å§ï¼›è¿™ä¸ªä¸‹æ¬¡å†å¼€ä¸€ç¯‡è®²è§£ï¼›</p>
</li>
<li>
<p>å¸¦squashfsçš„ç›¸å½“äºå“ç‰Œè·¯ç”±å™¨çš„romï¼Œå½“ä½ å¯¹è‡ªå·±å®‰è£…çš„åº”ç”¨æˆ–é…ç½®ä¸æ»¡æ„çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥é‡ç½®ç³»ç»Ÿï¼Œå°±åƒå›åˆ°åˆå§‹çŠ¶æ€ä¸€æ ·ï¼›</p>
</li>
<li>
<p>å¸¦factoryçš„æ˜¯ç»™ä¹‹å‰ä¸æ˜¯ç”¨OpenWRTç³»ç»Ÿçš„ç”¨æˆ·åˆå§‹åˆ·tfå¡ç”¨çš„ï¼›</p>
</li>
<li>
<p>å¸¦sysupgradeçš„æ˜¯é’ˆå¯¹åŸå…ˆä½¿ç”¨OpenWRTçš„ç”¨æˆ·ï¼Œå¯ä»¥ç”¨cmdå‘½ä»¤æˆ–è€…GUIç•Œé¢ç›´æ¥å‡çº§ç”¨ã€‚</p>
</li>
</ol>
<h3 id="4b-è‡ªç¼–è¯‘openwrté•œåƒ">4B è‡ªç¼–è¯‘openwrté•œåƒ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Image for your Device   sha256sum   File Size   Date
rpi-4-ext4-factory.img.gz   31bc61700978fa8f30eeb5e888f34b665582bb8170ac6b7be7ff0d1caa3a2ca6    14328.4 KB  Sun Aug 1 21:27:40 2021
rpi-4-ext4-sysupgrade.img.gz    68f87c294335efeb2404f11abebeb3723be699660bdb5e44369c5a9cc31cdd2d    14328.8 KB  Sun Aug 1 21:27:41 2021
rpi-4-squashfs-factory.img.gz   93df781cc17b8eb2b64ef205fd4432b1538240300d571b1662633b1b2fd632b6    12882.0 KB  Sun Aug 1 21:27:40 2021
rpi-4-squashfs-sysupgrade.img.gz    3ec10b4d8a9659cbcd157166d70c230767f86f9550fb333ef85ba205780a17ac    12882.3 KB  Sun Aug 1 21:27:40 2021
</code></pre></td></tr></table>
</div>
</div><p>binæ–‡ä»¶åç§°ä¸­æœ‰ä¸¤ç§ä¸åŒçš„æ ¼å¼ï¼Œjffs2ä¸ squashfsã€‚è¿™ä¸¤ç§æ ¼å¼çš„å›ºä»¶åŒºåˆ«åœ¨äºï¼Œsquashfsæ ¼å¼çš„binæ–‡ä»¶å®‰è£…åï¼Œä¼šå ç”¨ä¸€å®šçš„ç©ºé—´æ¥å­˜æ”¾ç³»ç»Ÿçš„ä¸€äº›å¿…è¦æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶éƒ½åªæ˜¯å¯è¯»çš„ï¼Œå…¶ä½œç”¨æ˜¯å¸®åŠ©æ¢å¤ç³»ç»Ÿã€‚å½“OpenWrtå´©æºƒæ—¶ï¼Œå¯ä»¥åŸºäºè¿™äº›æ–‡ä»¶ï¼Œä½¿ç”¨firstbootè„šæœ¬é‡å»ºåˆå§‹ç³»ç»Ÿï¼Œè€Œjffs2åˆ™ä¸ä¼šå­˜å‚¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå¥½å¤„æ˜¯èŠ‚çœäº†ç©ºé—´ã€‚ä¸€èˆ¬ä½¿ç”¨squashfsæ ¼å¼çš„å›ºä»¶ï¼Œæ–¹ä¾¿æ¢å¤ç³»ç»Ÿåˆ°åˆå§‹çŠ¶æ€ã€‚</p>
<p>factoryä¸sysupgradeï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œfactoryå¤šäº†ä¸€äº›éªŒè¯çš„ä¸œè¥¿ï¼Œç”¨äºåœ¨åŸå‚å›ºä»¶çš„åŸºç¡€ä¸Šè¿›è¡Œå‡çº§ï¼Œå¦‚æœå·²ç»æ˜¯OpenWrtï¼Œç›´æ¥ä½¿ç”¨sysupgradeæ–‡ä»¶å³å¯ã€‚å¹¶ä¸”ï¼Œåœ¨åŸå‚å›ºä»¶çš„åŸºç¡€ä¸Šè¿›è¡Œå‡çº§æ—¶ï¼Œé¦–å…ˆä½¿ç”¨factoryæ–‡ä»¶ï¼Œç„¶åéœ€è¦å†æ¬¡ä½¿ç”¨ sysupgradeæ–‡ä»¶ï¼Œé€‰æ‹©ä¸ä¿ç•™åŸæ¥é…ç½®è¿›è¡Œå‡çº§ã€‚</p>
<p><a href="https://leux.cn/doc/OPENWRT%E7%BC%96%E8%AF%91%E4%B9%8B%E6%A0%91%E8%8E%93%E6%B4%BE4B.html" target="_blank" rel="noopener noreffer">https://leux.cn/doc/OPENWRT%E7%BC%96%E8%AF%91%E4%B9%8B%E6%A0%91%E8%8E%93%E6%B4%BE4B.html</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># å®‰è£…ç¼–è¯‘å·¥å…·
sudo apt-get update
sudo apt-get install build-essential asciidoc binutils bzip2 \
gawk gettext git libncurses5-dev libz-dev patch unzip zlib1g-dev \
lib32gcc1 libc6-dev-i386 subversion flex uglifyjs libssl-dev upx \
gcc-multilib p7zip p7zip-full msmtp texinfo libglib2.0-dev xmlto \
git-core qemu-utils libelf-dev autoconf automake libtool autopoint \
curl wget device-tree-compiler
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ³¨æ„ï¼šä¸è¦ä½¿ç”¨rootç”¨æˆ·ç¼–è¯‘ï¼Œæœ€å¥½å‡†å¤‡å¥½æ¢¯å­</p>
<p>ç¼–è¯‘ååœ¨openwrt/bin/targets/brcm2708/bcm2711/ä¸‹æ‰¾åˆ°openwrt-brcm2708-bcm2711-rpi-4-ext4-factory.img.gzï¼ŒæŠŠå…¶ä¸­çš„imgåˆ·å…¥SDå¡ä¸­å³å¯</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># ä¸‹è½½æºç ï¼ŒäºŒé€‰ä¸€å³å¯
mkdir openwrt
cd openwrt/
git clone https://git.openwrt.org/openwrt/openwrt.git ./  # openwrtå®˜æ–¹æºç 
git clone https://github.com/coolsnowwolf/lede ./     # leanç‰ˆé­”æ”¹æºç 

# ä»¥åæ¯æ¬¡ç¼–è¯‘å‰å»ºè®®æ‰§è¡Œä»¥ä¸‹ä¸‰è¡Œå‘½ä»¤æ›´æ–°æºç 
git pull
./scripts/feeds update -a
./scripts/feeds install -a

make defconfig      # æµ‹è¯•ç¼–è¯‘ç¯å¢ƒ
make menuconfig     # é…ç½®ç¼–è¯‘å‚æ•°
make download -j8 V=s   # ä¸‹è½½æ‰€éœ€æºç ï¼Œè¯·å°½é‡ä½¿ç”¨æ¢¯å­
make -j1 V=s        # é¦–æ¬¡ç¼–è¯‘æ¨èç”¨å•çº¿ç¨‹

# å†æ¬¡ç¼–è¯‘å‰å»ºè®®ä½¿ç”¨make cleanæ¸…ç†
make clean  # æ¸…é™¤binç›®å½•
make dirclean   # æ¸…é™¤binç›®å½•å’Œäº¤å‰ç¼–è¯‘å·¥å…·åŠå·¥å…·é“¾ç›®å½•
make distclean  # æ¸…é™¤æ‰€æœ‰ç›¸å…³çš„ä¸œè¥¿ï¼ŒåŒ…æ‹¬ä¸‹è½½çš„è½¯ä»¶åŒ…ï¼Œé…ç½®æ–‡ä»¶ï¼Œfeedå†…å®¹ç­‰
</code></pre></td></tr></table>
</div>
</div><p><strong>å›ºä»¶ç¼–è¯‘é…ç½®</strong></p>
<ol>
<li>
<p>ç®€å•çš„make menuconfigå‚æ•°é…ç½®ï¼Œé™¤å¿…é€‰é…ç½®å¤–çš„å…¶ä»–é¡¹å¯è‡ªè¡Œé€‰æ‹©</p>
</li>
<li>
<p>åŸºç¡€é…ç½®</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># å¿…é€‰é…ç½®
Target System -&gt; Broadcom BCM27xx
Subtarget -&gt; BCM2711 boards (64 bit)
Target Profile -&gt; Raspberry Pi 4B

# é•œåƒå‚æ•°
Target Images -&gt; ext4       # ext4æ ¼å¼çš„å›ºä»¶å¯æ–¹ä¾¿åœ°è°ƒæ•´åˆ†åŒºå¤§å°
Target Images -&gt; squashfs   # squashfsæ ¼å¼çš„å›ºä»¶å¯æ¢å¤å‡ºå‚è®¾ç½®
Target Images -&gt; Kernel partition size = 20     # bootåˆ†åŒºå¤§å°ä¸º20M
Target Images -&gt; Root filesystem partition size = 500   # rootåˆ†åŒºå¤§å°ä¸º500M

# å¯é€‰å·¥å…·
Base system -&gt; block-mount  # åœ¨LuCIç•Œé¢æ·»åŠ &lt;æŒ‚è½½ç‚¹&gt;èœå•
Base system -&gt; blockd       # è‡ªåŠ¨æŒ‚è½½è®¾å¤‡
Administration -&gt; htop      # æ·»åŠ htopå‘½ä»¤
Firmware -&gt; xxx         # é€‰æ‹©ä½ éœ€è¦çš„ç½‘å¡å›ºä»¶ï¼Œé»˜è®¤å³å¯
</code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>å†…æ ¸æ¨¡å—</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># æ–‡ä»¶ç³»ç»Ÿ
Kernel modules -&gt; Filesystems -&gt; kmod-fs-ext4
Kernel modules -&gt; Filesystems -&gt; kmod-fs-ntfs
Kernel modules -&gt; Filesystems -&gt; kmod-fs-squashfs
Kernel modules -&gt; Filesystems -&gt; kmod-fs-vfat
Kernel modules -&gt; Filesystems -&gt; kmod-fuse

# ç½‘å¡æ”¯æŒ
Kernel modules -&gt; Network Devices -&gt; kmod-xxx   # æœ‰çº¿ç½‘å¡æ”¯æŒï¼Œé»˜è®¤å³å¯
Kernel modules -&gt; USB Support -&gt; kmod-usb-net -&gt; kmod-usb-net-xxx  # USBæœ‰çº¿ç½‘å¡æ”¯æŒï¼Œé»˜è®¤å³å¯
Kernel modules -&gt; Wireless Drivers -&gt; kmod-xxx  # æ— çº¿ç½‘å¡æ”¯æŒï¼Œé»˜è®¤å³å¯

# USBæ”¯æŒ
Kernel modules -&gt; USB Support -&gt; kmod-usb-core      # å¯ç”¨USBæ”¯æŒ
Kernel modules -&gt; USB Support -&gt; kmod-usb-hid       # USBé”®é¼ æ”¯æŒ
Kernel modules -&gt; USB Support -&gt; kmod-usb-storage   # å¯ç”¨USBå­˜å‚¨
Kernel modules -&gt; USB Support -&gt; kmod-usb-storage-extras
Kernel modules -&gt; USB Support -&gt; kmod-usb-usb2      # å¼€å¯USB2æ”¯æŒ
Kernel modules -&gt; USB Support -&gt; kmod-usb-usb3      # å¼€å¯USB3æ”¯æŒ
</code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>LuCIè®¾ç½®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># LuCIè®¾ç½®
LuCI -&gt; Collections -&gt; luci             # å¼€å¯luci
LuCI -&gt; Modules -&gt; Translations -&gt; Chinese(zh-cn)   # ä¸­æ–‡æ”¯æŒ
LuCI -&gt; Themes -&gt; luci-theme-material           # æ·»åŠ çš®è‚¤

# LuCIåº”ç”¨
LuCI -&gt; Applications -&gt; luci-app-aria2          # ä¸‹è½½å·¥å…·
LuCI -&gt; Applications -&gt; luci-app-firewall       # é˜² ç« å¢™
LuCI -&gt; Applications -&gt; luci-app-hd-idle        # ç¡¬ç›˜ä¼‘çœ 
LuCI -&gt; Applications -&gt; luci-app-opkg           # è½¯ ä»¶ åŒ…
LuCI -&gt; Applications -&gt; luci-app-qos            # æœåŠ¡è´¨é‡
LuCI -&gt; Applications -&gt; luci-app-samba          # ç½‘ç»œå…±äº«
LuCI -&gt; Applications -&gt; luci-app-shadowsocks-libev  # ç¿»å¢™è½¯ä»¶
LuCI -&gt; Applications -&gt; luci-app-upnp           # UPnPæœåŠ¡
LuCI -&gt; Applications -&gt; luci-app-wol            # ç½‘ç»œå”¤é†’
</code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>å…¶ä»–è®¾ç½®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Network -&gt; Download Manager -&gt; ariang   # Aria2ç®¡ç†é¡µé¢
Network -&gt; File Transfer -&gt; Aria2 Configuration -&gt; ***  # é€‰æ‹©Aria2æ”¯æŒçš„åŠŸèƒ½
Network -&gt; File Transfer -&gt; curl    # æ·»åŠ curlå‘½ä»¤
Network -&gt; File Transfer -&gt; wget    # æ·»åŠ wgetå‘½ä»¤
Utilities -&gt; Compression -&gt; bsdtar  # taræ‰“åŒ…å·¥å…·
Utilities -&gt; Compression -&gt; gzip    # GZ å‹ç¼©å¥—ä»¶
Utilities -&gt; Compression -&gt; xz-utils    # XZ å‹ç¼©å¥—ä»¶
Utilities -&gt; Compression -&gt; unzip   # zipè§£å‹å·¥å…·
Utilities -&gt; Compression -&gt; zip     # zipå‹ç¼©å·¥å…·
Utilities -&gt; Disc -&gt; fdisk      # ç£ç›˜åˆ†åŒºå·¥å…·
Utilities -&gt; Disc -&gt; lsblk      # ç£ç›˜æŸ¥çœ‹å·¥å…·
Utilities -&gt; Disc -&gt; hd-idle        # ç£ç›˜ä¼‘çœ 
Utilities -&gt; Disc -&gt; hdparm     # ç¡¬ç›˜æ§åˆ¶è½¯ä»¶
Utilities -&gt; Editors -&gt; vim     # vimç¼–è¾‘å™¨
Utilities -&gt; Filesystem -&gt; ntfs-3g  # NTFSè¯»å†™æ”¯æŒ
Utilities - Terminal -&gt; screen      # æ·»åŠ screen
</code></pre></td></tr></table>
</div>
</div><ol start="6">
<li>IPv6æ”¯æŒ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Global build settings -&gt; Enable IPv6 support in packages    # å¯ç”¨IPv6é¡¹
Network -&gt; odhcp6c                      # IPv6å®¢æˆ·ç«¯
Network -&gt; odhcpd-ipv6only                  # IPv6æœåŠ¡ç«¯
Network -&gt; Firewall -&gt; ip6tables                # IPv6é˜²ç«å¢™
LuCI -&gt; Protocols -&gt; luci-proto-ipv6                #  WebUIæ”¯æŒ
</code></pre></td></tr></table>
</div>
</div><h3 id="æ ‘è“æ´¾å®‰è£…centos7">æ ‘è“æ´¾å®‰è£…centos7</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">åˆå§‹è´¦å·ï¼šroot
å¯†ç ï¼šcentos
</code></pre></td></tr></table>
</div>
</div><p>å°†å¯ç”¨åˆ†åŒºæ‰©å±•åˆ°æ•´ä¸ªSDå¡
/usr/bin/rootfs-expand
df -Th
è¿™é‡Œå°±å¯ä»¥çœ‹åˆ°æ‰©å±•ä»¥åçš„åˆ†åŒºäº†</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-11-19</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/api/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£" data-via="xxxx"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="http://example.org/api/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="http://example.org/api/" data-title="HTTP APIæ–‡æ¡£"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav">
            <a href="/first_post/" class="next" rel="next" title="First_post">First_post<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.89.2">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Allen</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":100},"comment":{},"cookieconsent":{"content":{"dismiss":"åŒæ„","link":"äº†è§£æ›´å¤š","message":"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒ."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
